<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For My Lablab ‚ù§Ô∏è</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  background:linear-gradient(to bottom,#4a0000,#7a0000,#b30000);
  font-family:'Poppins',sans-serif;
  color:#fff;
  text-align:center;
  min-height:100vh;
  overflow-x:hidden;
}

/* GLOBAL GLOW */
h1,h2,p,img,.modal-content,.secret button{
  text-shadow:0 0 12px rgba(255,200,200,.6);
}

/* INTRO LOADING */
#intro{
  position:fixed; inset:0; background:#3a0000;
  display:flex; justify-content:center; align-items:center;
  flex-direction:column; z-index:999; animation:fadeOut 1.5s ease forwards; animation-delay:2.5s;
}
#intro h1{font-size:3rem; animation:pulse 2s infinite;}
@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}100%{transform:scale(1)}}
@keyframes fadeOut{to{opacity:0;visibility:hidden}}

/* Titles */
h1{font-family:'Great Vibes',cursive; font-size:clamp(2.4rem,6vw,3.5rem); margin:25px 0;}

/* Heart Gallery */
.heart-gallery{
  position:relative; width:min(360px,90vw); height:min(320px,80vw); margin:30px auto;
}
.heart-gallery img{
  position:absolute; width:30%; aspect-ratio:1/1; object-fit:cover;
  border-radius:20px; cursor:pointer; transition:.3s; box-shadow:0 0 25px rgba(255,150,150,.7);
}
.heart-gallery img:active{transform:scale(1.08)}
.pos1{top:0;left:20%} .pos2{top:0;right:20%} .pos3{top:25%;left:0} .pos4{top:25%;right:0}
.pos5{top:50%;left:20%} .pos6{top:50%;right:20%} .pos7{top:75%;left:35%}

/* Falling flowers */
.flower{position:fixed;top:-10px;font-size:22px;pointer-events:none;animation:fall linear infinite;z-index:1;}
@keyframes fall{to{transform:translateY(110vh) rotate(360deg);opacity:0}}

/* Floating hearts */
.heart{position:fixed;bottom:-20px;font-size:18px;animation:float 6s linear infinite;opacity:.7;pointer-events:none;}
@keyframes float{to{transform:translateY(-110vh);opacity:0}}

/* Modal */
.modal{position:fixed; inset:0; background:rgba(0,0,0,.85); display:none; justify-content:center; align-items:center; z-index:10; padding:15px;}
.modal-content{background:#fff;color:#8b0000; padding:20px; border-radius:22px; max-width:520px; width:100%; max-height:90vh; overflow-y:auto;}
.modal-content img{width:100%; border-radius:18px; margin-bottom:15px;}
.modal-content button{margin-top:10px;background:#b00000;color:#fff;border:none;padding:8px 14px;border-radius:20px;cursor:pointer;}

/* Secret Letter */
.secret{margin:60px 0;}
.secret button{
  background:#ffb3b3; color:#5a0000; border:none; padding:14px 26px;
  border-radius:30px; font-size:1rem; cursor:pointer; box-shadow:0 0 20px rgba(255,200,200,.7);
}
#secretLetter{
  display:none; position:fixed; inset:0; background:rgba(0,0,0,.85);
  z-index:20; justify-content:center; align-items:center; padding:20px;
}
#secretContent{
  background:#fff; color:#8b0000; padding:30px; border-radius:25px; max-width:500px;
}
#secretText[contenteditable="true"]{outline:2px dashed #ff6666;padding:10px;}

/* Admin Panel */
.admin{display:none;background:#fff;color:#8b0000;max-width:500px;margin:20px auto;padding:20px;border-radius:15px;}
.admin input,.admin textarea{width:100%;padding:10px;margin:6px 0;}
.admin button{background:#8b0000;color:#fff;border:none;padding:10px 18px;border-radius:20px;cursor:pointer;}
</style>
</head>

<body>

<!-- Intro -->
<div id="intro"><h1>For someone special ‚ù§Ô∏è</h1></div>

<h1>Happy Valentine‚Äôs Day ‚ù§Ô∏è</h1>
<p>Tap the memories üåπ</p>

<div class="heart-gallery" id="gallery"></div>

<!-- Secret Letter -->
<div class="secret">
  <button onclick="openSecret()">One last thing‚Ä¶</button>
</div>

<div id="secretLetter" onclick="closeSecret()">
  <div id="secretContent">
    <h2>For You ‚ù§Ô∏è</h2>
    <div id="secretText" contenteditable="false">
      No matter where life takes us, I hope you always remember this ‚Äî someone believes in you deeply, quietly, and completely.
    </div>
    <button id="saveSecretBtn" style="display:none;">Save</button>
  </div>
</div>

<!-- Modal -->
<div class="modal" id="modal" onclick="closeModal()">
  <div class="modal-content" onclick="event.stopPropagation()">
    <img id="modalImg">
    <h2 id="modalTitle"></h2>
    <p id="modalText"></p>
    <button id="deleteBtn">Delete</button>
  </div>
</div>

<!-- Admin Panel -->
<div class="admin" id="adminPanel">
  <h3>Admin Panel</h3>
  <input type="file" id="imageInput" accept="image/*">
  <input type="file" id="musicInput" accept="audio/*">
  <input type="text" id="titleInput" placeholder="Memory title">
  <textarea id="textInput" placeholder="Letter / memory"></textarea>
  <button id="addMemoryBtn">Add Memory</button>
</div>

<audio id="musicPlayer"></audio>

<script>
// DOM references
const gallery=document.getElementById("gallery");
const modal=document.getElementById("modal");
const modalImg=document.getElementById("modalImg");
const modalTitle=document.getElementById("modalTitle");
const modalText=document.getElementById("modalText");
const deleteBtn=document.getElementById("deleteBtn");
const imageInput=document.getElementById("imageInput");
const musicInput=document.getElementById("musicInput");
const titleInput=document.getElementById("titleInput");
const textInput=document.getElementById("textInput");
const addMemoryBtn=document.getElementById("addMemoryBtn");
const secretText=document.getElementById("secretText");
const saveSecretBtn=document.getElementById("saveSecretBtn");

let memories=JSON.parse(localStorage.getItem("memories"))||[];
let adminMode=false,currentIndex=null;
const pos=["pos1","pos2","pos3","pos4","pos5","pos6","pos7"];

// render gallery
function render(){
  gallery.innerHTML="";
  memories.slice(0,7).forEach((m,i)=>{
    const img=document.createElement("img");
    img.src=m.img; img.className=pos[i]; img.onclick=()=>openModal(i);
    gallery.appendChild(img);
  });
}
render();

// modal
function openModal(i){
  const m=memories[i]; currentIndex=i;
  modalImg.src=m.img; modalTitle.innerText=m.title; modalText.innerText=m.text;
  modal.style.display="flex"; deleteBtn.style.display=adminMode?"block":"none";
  if(m.music){document.getElementById("musicPlayer").src=m.music; document.getElementById("musicPlayer").play();}
}
function closeModal(){modal.style.display="none"; document.getElementById("musicPlayer").pause();}
function deleteMemory(){
  if(confirm("Delete this memory?")){
    memories.splice(currentIndex,1);
    localStorage.setItem("memories",JSON.stringify(memories));
    closeModal(); render();
  }
}

// admin add memory
addMemoryBtn.addEventListener("click", ()=>{
  const imgFile=imageInput.files[0];
  if(!imgFile)return alert("Please select an image!");
  const reader=new FileReader();
  reader.onload=function(e){
    const imgData=e.target.result;
    const musicFile=musicInput.files[0];
    if(musicFile){
      const musicReader=new FileReader();
      musicReader.onload=function(ev){ saveMemory(imgData,ev.target.result); }
      musicReader.readAsDataURL(musicFile);
    }else saveMemory(imgData,null);
  }
  reader.readAsDataURL(imgFile);
});
function saveMemory(imgData,musicData){
  memories.push({img:imgData,music:musicData,title:titleInput.value,text:textInput.value});
  localStorage.setItem("memories",JSON.stringify(memories));
  render();
  imageInput.value=musicInput.value=titleInput.value=textInput.value="";
  alert("Memory added successfully!");
}

// secret letter
function openSecret(){document.getElementById("secretLetter").style.display="flex";}
function closeSecret(){document.getElementById("secretLetter").style.display="none";}
saveSecretBtn.addEventListener("click",()=>{
  localStorage.setItem("secretLetter",secretText.innerText);
  alert("Secret letter saved!");
});
// load saved secret letter
const savedSecret = localStorage.getItem("secretLetter");
if(savedSecret){secretText.innerText=savedSecret;}

// admin access
document.addEventListener("keydown",e=>{
  if(e.key==="a"){
    const pass=prompt("Admin password:");
    if(pass==="admin123"){
      adminMode=true;
      document.getElementById("adminPanel").style.display="block";
      secretText.contentEditable="true";
      saveSecretBtn.style.display="inline-block";
      alert("Admin mode enabled!");
    }
  }
});

// falling flowers
setInterval(()=>{
  const f=document.createElement("div");
  f.className="flower";
  f.innerText=Math.random()>.5?"üåπ":"üå∏";
  f.style.left=Math.random()*100+"vw";
  f.style.animationDuration=4+Math.random()*4+"s";
  document.body.appendChild(f);
  setTimeout(()=>f.remove(),8000);
},500);

// floating hearts
setInterval(()=>{
  const h=document.createElement("div");
  h.className="heart";
  h.innerText="üíó";
  h.style.left=Math.random()*100+"vw";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),8000);
},800);
</script>
</body>
</html>
